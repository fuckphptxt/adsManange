var de=Object.defineProperty;var J=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var Q=(r,i,n)=>i in r?de(r,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[i]=n,X=(r,i)=>{for(var n in i||(i={}))pe.call(i,n)&&Q(r,n,i[n]);if(J)for(var n of J(i))_e.call(i,n)&&Q(r,n,i[n]);return r};var _=(r,i,n)=>new Promise((R,S)=>{var h=c=>{try{k(n.next(c))}catch(p){S(p)}},L=c=>{try{k(n.throw(c))}catch(p){S(p)}},k=c=>c.done?R(c.value):Promise.resolve(c.value).then(h,L);k((n=n.apply(r,i)).next())});import{d as fe,f as m,r as ve,a7 as ge,Z as q,a8 as be,a9 as a,k as s,u as f,ac as ye,G as d,a0 as g,m as x,A as T,$ as I,_ as Y,F as he,aa as Ce}from"./vue-BsEqlI2B.js";import{_ as ke}from"./componentMap-ntVNUfGj.js";import{a as y,u as we,_ as xe}from"./entry/index-DeA-E56H-1712476170604.js";import"./helper-D26ItluK.js";import"./BasicForm.vue_vue_type_style_index_0_lang-BvFAdDEs.js";import{K as E,T as Te}from"./antd-DeDWztM9.js";import{u as ee}from"./index-D4lH302q.js";import"./TableImg.vue_vue_type_style_index_0_lang-D_jLqrrq.js";import"./uuid-D0SLUWHI.js";import"./sortable.esm-CoO8jRpa.js";import{P as Ie}from"./index-nsw1gsVQ.js";import{vxeTableColumns as Se,vxeTableFormSchema as Ae}from"./tableData-Cko6l0h8.js";import{V as Me}from"./index-BqTCX4sW.js";import{g as V}from"./table-C1pus5Ot.js";import O from"./tooltip-CF2IlLpG.js";import $e from"./uploadFile-DVhbNgUA.js";import De from"./searchList-Dq9TEsYp.js";import{_ as Fe}from"./add-modal.vue_vue_type_script_setup_true_lang-6zkz9W11.js";import{s as B}from"./select-gA0uFJlM.js";import{_ as Ve}from"./addWorkModal.vue_vue_type_script_setup_true_lang-D91_9UdW.js";import"./useFormItem-C8SvMC7Y.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-EGd22fob.js";import"./useSortable-B5C7L1iY.js";import"./download-C0dscIFQ.js";import"./base64Conver-bBv-IO2K.js";import"./index-CnUmmaWj.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-BtQnCoXl.js";import"./copyTextToClipboard-CmW_HBj4.js";import"./index-eB2fGItq.js";import"./index-D77yVwLP.js";import"./useWindowSizeFn-dzDjg1EY.js";import"./onMountedOrActivated-DNS7E5S8.js";import"./useContentViewHeight-CYeOqeUw.js";import"./upload.vue_vue_type_script_setup_true_lang-BNeIt5Hq.js";import"./Step1-CxnH-mdd.js";import"./BasicForm.vue_vue_type_script_setup_true_lang-C5My3wis.js";import"./FormItem.vue_vue_type_script_lang-rXirYbu_.js";import"./useForm-Bpj89oTF.js";import"./data-Chq1bPVB.js";import"./Step3.vue_vue_type_script_setup_true_lang-BcBD_EAq.js";import"./work-DhQ6FW9u.js";const Be={class:"account"},Re=fe({__name:"index",setup(r){const[i,{openModal:n}]=ee(),[R,{openModal:S}]=ee(),h=m(!1),L={1:"正常",2:"被封禁",3:"未登录",4:"不存在",5:"繁忙",6:"异常"},k={1:"success",2:"danger",3:"info",4:"info",5:"warning",6:"danger"},c=m(!1),p=m(""),A=m(""),M=m([]),{createMessage:$}=we(),D=m(""),N=m(),F=m(!1);m();const C=m(),te=ve({id:"VxeTable",keepSource:!0,editConfig:{trigger:"dblclick",mode:"cell",showStatus:!0},columns:Se,toolbarConfig:{slots:{buttons:"search"}},formConfig:{enabled:!0,items:Ae},height:"auto",proxyConfig:{ajax:{query:o=>_(this,[o],function*({page:t,form:l}){const e=yield V(X({page:t.currentPage,limit:t.pageSize},l));return{items:e.list,total:e.count}}),queryAll:l=>_(this,[l],function*({form:t}){return yield V(t)})}}}),ae=t=>[{icon:"icon-park-outline:editor",tooltip:"编辑标签",onClick:()=>{D.value="设置标签",A.value="set_tag",c.value=!0,h.value=!1,p.value=t.adsp_acc_id,n(!0,{selectValue:t.tag_list})}},{icon:"material-symbols:delete",color:"error",tooltip:"删除账号",popConfirm:{title:"是否确认删除",confirm:()=>{G([t.adsp_acc_id])}}}],se=()=>{D.value="添加ACC ID",A.value="add",p.value="",c.value=!1,h.value=!0,n(!0)},H=t=>{C.value=(t==null?void 0:t.records.length)>0,t.records.map(o=>{M.value.push(o.adsp_acc_id)})},oe=(t,l,o)=>_(this,null,function*(){const e=l.filter(u=>u!==t);yield B({handle_type:"set_tag",acc_id_list:o,tag_list:e}),$.success("删除成功"),b()}),G=(t=null)=>_(this,null,function*(){yield B({handle_type:"del_account",acc_id_list:t||M.value}),b(),$.success("删除成功")}),ne=t=>_(this,null,function*(){yield B({handle_type:"set_is_clear_comments",acc_id_list:[t.row.adsp_acc_id]}),b(),$.success("修改成功")}),le=t=>_(this,null,function*(){const l=t==null?void 0:t.columnIndex;let o="";l<=5?o="set_adsp_name":o="set_remark",yield B({handle_type:o,adsp_name:o=="set_adsp_name"?t.row.adsp_name:null,adsp_remark:o=="set_remark"?t.row.adsp_remark:null,acc_id_list:[t.row.adsp_acc_id]}),$.success("保存成功"),b()}),ie=()=>{F.value=!0},ce=()=>{b(),F.value=!1},b=()=>_(this,null,function*(){var l;const t=yield V({page:1,limit:20});(l=N.value)==null||l.reloadData(t.list)}),re=(t,l)=>_(this,null,function*(){var e;const o=yield V({page:1,limit:500,search:l});(e=N.value)==null||e.reloadData(o.list)}),ue=()=>{p.value="",D.value="批量设置标签",A.value="set_tag",c.value=!0,h.value=!1,n(!0)},me=()=>{S(!0,{data:""})},W=t=>{if(!t)return;const l=Date.parse(t.replace(/-/gi,"/")),o=1e3*60,e=o*60,u=e*24,P=u*30;let v="";const w=new Date().getTime()-l,j=w/P,z=w/(7*u),K=w/u,U=w/e,Z=w/o;return j>=1?v=parseInt(j)+"个月前":z>=1?v=parseInt(z)+"周前":K>=1?v=parseInt(K)+"天前":U>=1?v=parseInt(U)+"小时前":Z>=1?v=+parseInt(Z)+"分钟前":v="刚刚",v};return(t,l)=>{const o=ge("a-button");return q(),be(f(Ie),{title:"",contentFullHeight:"",fixedHeight:""},{default:a(()=>[s(f(Me),ye({ref_key:"tableRef",ref:N},te,{onCheckboxChange:H,onCheckboxAll:H,onEditClosed:le}),{action:a(({row:e})=>[s(f(ke),{outside:"",actions:ae(e)},null,8,["actions"])]),toolbalSearch:a(()=>[s(De,{onPressEnterInput:re})]),tagSlot:a(({row:e})=>[s(f(E),{color:`${k[e.status]}`},{default:a(()=>[d(g(L[e.status]),1)]),_:2},1032,["color"])]),search:a(()=>[s(o,{type:"primary",class:"ant-btn",onClick:ie},{icon:a(()=>[s(y,{icon:"et:upload"})]),default:a(()=>[d(" 导入账号 ")]),_:1}),s(o,{type:"primary",class:"ant-btn",onClick:se},{icon:a(()=>[s(y,{icon:"icon-park-outline:doc-add"})]),default:a(()=>[d(" 添加账号 ")]),_:1}),x(s(o,{type:"dashed",class:"ant-btn",onClick:ue},{icon:a(()=>[s(y,{icon:"mdi:tag"})]),default:a(()=>[d(" 批量设置标签 ")]),_:1},512),[[T,C.value]]),x(s(o,{type:"dashed",class:"ant-btn",onClick:me},{icon:a(()=>[s(y,{icon:"fluent-mdl2:add-work"})]),default:a(()=>[d(" 批量添加任务 ")]),_:1},512),[[T,C.value]]),x(s(o,{type:"dashed",class:"ant-btn"},{icon:a(()=>[s(y,{icon:"uil:comment-info-alt"})]),default:a(()=>[d(" 获取账户信息 ")]),_:1},512),[[T,C.value]]),x(s(o,{type:"dashed",class:"ant-btn"},{icon:a(()=>[s(y,{icon:"solar:login-bold"})]),default:a(()=>[d(" 重新登录 ")]),_:1},512),[[T,C.value]]),x(s(o,{type:"dashed",class:"ant-btn",danger:"",onClick:l[0]||(l[0]=e=>G(null))},{icon:a(()=>[s(y,{icon:"material-symbols-light:auto-delete"})]),default:a(()=>[d(" 批量删除账户 ")]),_:1},512),[[T,C.value]])]),BMmessage:a(({row:e})=>[s(O,{bmInfo:e.bm_message},null,8,["bmInfo"])]),last_adsp_info_time:a(({row:e})=>[I("span",null,g(W(e.last_adsp_info_time)),1)]),last_mission_time:a(({row:e})=>[I("span",null,g(W(e.last_mission_time)),1)]),adAccountSlot:a(({row:e})=>[s(O,{bmInfo:e.ad_account,keyName:"number",isShowSuffixType:"is_bm",suffixTrue:"BM"},null,8,["bmInfo"])]),fbPageSlot:a(({row:e})=>[s(O,{bmInfo:e.fb_page,"key-name":"id",isShowSuffixType:"is_bm",suffixTrue:"BM"},null,8,["bmInfo"])]),tagList:a(({row:e})=>[(q(!0),Y(he,null,Ce(e.tag_list,(u,P)=>(q(),Y("span",{key:P},[s(f(E),{color:"#2db7f5",closable:"",onClose:v=>oe(u,e.tag_list,e.adsp_acc_id)},{default:a(()=>[d(g(u),1)]),_:2},1032,["onClose"])]))),128))]),clearReview:a(e=>[s(f(Te),null,{title:a(()=>[I("span",null,"点击修改为"+g(e.row.is_clear_comments==1?"否":"是"),1)]),default:a(()=>[s(f(E),{style:{cursor:"pointer"},color:e.row.is_clear_comments?"#f50":"",onClick:u=>ne(e)},{default:a(()=>[d(g(e.row.is_clear_comments==1?"是":"否"),1)]),_:2},1032,["color","onClick"])]),_:2},1024)]),accountNumber:a(({row:e})=>[I("div",Be,g(e.username),1),I("div",null,g(e.password),1)]),_:1},16),s($e,{visible:F.value,onCancelModal:l[1]||(l[1]=e=>F.value=!1),onHandleOk:ce},null,8,["visible"]),s(Fe,{title:D.value,onRegister:f(i),onOkFunction:b,ifShow:c.value,handleType:A.value,recordsIdList:M.value,accid:p.value,required:h.value},null,8,["title","onRegister","ifShow","handleType","recordsIdList","accid","required"]),s(Ve,{title:"设置每一步超时时间",onRegister:f(R),selectArrId:M.value,onOkFunction:b,accid:p.value},null,8,["onRegister","selectArrId","accid"])]),_:1})}}}),Tt=xe(Re,[["__scopeId","data-v-897488ec"]]);export{Tt as default};
